#---------------------------------------------------------------------
# Impide navegar en los directorios del sitio
#---------------------------------------------------------------------
Options All -Indexes

#---------------------------------------------------------------------
# En caso de error presentar páginas personalizadas
#---------------------------------------------------------------------
ErrorDocument 400 /mybox/errores/400.php
ErrorDocument 401 /mybox/errores/403.php
ErrorDocument 403 /mybox/errores/403.php
ErrorDocument 404 /mybox/errores/404.php
##ErrorDocument 500 /mybox/errores/500.php
ErrorDocument 500 /mybox/errores/500.php

#---------------------------------------------------------------------
# Evita tener acceso a los archivos con las siguientes extensiones
#---------------------------------------------------------------------
<FilesMatch "(\.(bak|config|inc|ini|log|sh|sql)|~)$">
    Order allow,deny
    Deny from all
    Satisfy All
</FilesMatch>

#---------------------------------------------------------------------
# Directivas de control añadidas para el Laboratorio #4
#---------------------------------------------------------------------
# Límite de 20 MB por archivo (configurado en PHP para uploads)
<IfModule mod_php7.c>
    # Se establece un límite máximo de 20 MB para archivos subidos
    php_value upload_max_filesize 20M
    php_value post_max_size 20M
    # Nota: También se valida en agrearchi.php para redundancia
</IfModule>

# Restringir acceso a 3 terminales del laboratorio (desactivado para pruebas locales)
# Reemplaza IP1, IP2, IP3 con las IPs reales del laboratorio cuando lo actives
#<IfModule mod_authz_core.c>
#    <RequireAny>
#        Require ip 192.168.1.10 192.168.1.11 192.168.1.12
#    </RequireAny>
#</IfModule>

#---------------------------------------------------------------------
# Puede activar las siguientes instrucciones en este archivo.
# Estas directivas fueron escritas en el archivo apache2.conf.
#---------------------------------------------------------------------
#RewriteEngine on
#RewriteCond %{HTTPS} !on
#RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}